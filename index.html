<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

  <title>HSU / SUPERKLUB</title>

  <link rel="canonical" href="https://vixentres.github.io/hsu.github.io/" />
  <meta name="description" content="| HSU / SUPERKLUB / ENTRADAS SIN CARGO, 36K (BLACK FRIDAY) | ig: Vixentres._"/>
  <meta name="robots" content="index,follow" />
  
  <meta property="og:title" content="HSU / SUPERKLUB / ENTRADAS SIN CARGO, 36K (BLACK FRIDAY) | ig: Vixentres._" />
  <meta property="og:description" content="‚õì Vicente üåπ (@vixentres._) 3,928 seguidores, 1,349 seguidos, 51 publicaciones - Ver fotos y videos de Instagram" />
  <meta property="og:image" content="https://vixentres.github.io/hsu.github.io/banner%201.jpg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:url" content="https://vixentres.github.io/hsu.github.io/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="HSU / SUPERKLUB" />

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="HSU / SUPERKLUB / ENTRADAS SIN CARGO, 36K (BLACK FRIDAY) | ig: Vixentres._" />
  <meta name="twitter:description" content="‚õì Vicente üåπ (@vixentres._) 3,928 seguidores, 1.349 seguidos, 51 publicaciones - Ver fotos y videos de Instagram" />
  <meta name="twitter:image" content="https://vixentres.github.io/hsu.github.io/banner%201.jpg" />

  <!-- Libs -->
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
  <script src="https://cdn.logwork.com/widget/countdown.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.0/dist/confetti.browser.js"></script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap');
    @font-face {
      font-family: 'Authority Regular';
      src: url('authority-regular.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }
    :root{
      --btn-size:70px;
      --btn-gap:16px;
      --title-size:4em;
      --countdown-top:140px;
      --banner-h:40px;
      --azul:#024ddf;
      --magenta:#ff2aa6;
      --turq:#16e0d1;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:'Montserrat',sans-serif; overflow:hidden;
      display:flex; flex-direction:column; height:100vh; background:#000;
    }

    /* ===== Banners ===== */
    #top-scrolling-banner,#scrolling-banner{
      position:fixed; left:0; width:100%; height:var(--banner-h); overflow:hidden; z-index:2200; pointer-events:none; background:#000; transition:opacity .3s;
    }
    #top-scrolling-banner{ top:0 } #scrolling-banner{ bottom:0 }
    #top-scrolling-banner-content,#scrolling-banner-content{
      background-image:url("https://vixentres.github.io/hsu.github.io/banda.png");
      background-size:auto 100%; background-repeat:repeat-x; position:absolute; height:100%; width:300%;
    }
    #top-scrolling-banner-content{ animation:scrollBannerTop 70s linear infinite reverse }
    #scrolling-banner-content{ animation:scrollBanner 70s linear infinite }
    @keyframes scrollBannerTop{0%{transform:translateX(0)}100%{transform:translateX(-66.66%)}}
    @keyframes scrollBanner{0%{transform:translateX(0)}100%{transform:translateX(-66.66%)}}
    .dim-banner{ opacity:.6 }

    /* ===== T√≠tulo / countdown ===== */
    #superklub-title{
      position:fixed; top:calc(var(--banner-h) + 8px); width:100%; text-align:center; z-index:1500; color:#fff; font-size:var(--title-size); font-weight:700;
      text-shadow:0 0 8px rgba(0,255,255,.7),0 0 18px rgba(0,255,255,.45);
      letter-spacing:.02em; opacity:.95; pointer-events:none; font-family:'Authority Regular',sans-serif;
      animation:neonPulse 4s ease-in-out infinite;
    }
    @keyframes neonPulse{
      0%{ text-shadow:0 0 2px rgba(0,255,255,.5),0 0 8px rgba(0,255,255,.35); opacity:.85; }
      6%{ text-shadow:0 0 14px rgba(0,255,255,.9),0 0 30px rgba(0,255,255,.6); opacity:1; }
      9%{ text-shadow:0 0 6px rgba(0,255,255,.6),0 0 14px rgba(0,255,255,.45); opacity:.9; }
      100%{ text-shadow:0 0 12px rgba(0,255,255,.8),0 0 26px rgba(0,255,255,.55); opacity:.98; }
    }

    #countdown-container{
      position:fixed; top:var(--countdown-top); width:100%; text-align:center; padding:10px 0; background:rgba(0,0,0,.7); z-index:1400; pointer-events:none;
    }
    .countdown-timer{ font-size:1.5em; color:#fff; text-shadow:1px 1px 3px rgba(0,0,0,.8) }

    /* ===== DJs (listado rotativo) ===== */
    #dj-scroller-container{
      position:fixed; bottom:220px; width:100%; height:150px; overflow:hidden; text-align:center; z-index:1300; pointer-events:none; color:#fff; font-weight:700;
      text-shadow:0 0 10px rgba(0,255,255,.8),0 0 20px rgba(0,255,255,.6);
      display:flex; flex-direction:column; justify-content:center; align-items:center;
    }
    .dj-name-item{ font-size:2em; transition:all .5s; white-space:nowrap; line-height:1.2; height:50px; display:flex; align-items:center; justify-content:center; opacity:.3; font-family:'Authority Regular',sans-serif }
    .dj-name-item.center{ font-size:3.5em; opacity:1 }

    /* ===== CTA principal ===== */
    #centered-bottom-text{
      position:fixed; bottom:140px; width:100%; text-align:center; z-index:2100; pointer-events:auto
    }
    .register-text{
      position:relative;
      color:#eaffff; font-size:1.25em; font-weight:800; letter-spacing:.06em;
      text-decoration:none; padding:10px 16px; cursor:pointer; display:inline-block;
      border-radius:999px;
      background:linear-gradient(180deg, rgba(2,77,223,.18) 0%, rgba(0,0,0,.2) 100%);
      box-shadow:0 0 16px rgba(0,255,255,.35), inset 0 0 10px rgba(0,255,255,.12);
      transform-origin:center; transition:transform .25s, box-shadow .25s, filter .25s;
      animation:ctaBreathe 2.4s ease-in-out infinite;
      overflow:hidden; isolation:isolate;
    }
    .register-text::after{
      content:""; position:absolute; inset:0; padding:2px; border-radius:999px;
      background:linear-gradient(130deg, var(--magenta), var(--turq), var(--magenta));
      background-size:200% 200%;
      -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      -webkit-mask-composite:xor; mask-composite:exclude;
      animation:ctaGradient 8s ease-in-out infinite;
      opacity:.95; z-index:-1;
    }
    .register-text::before{
      content:""; position:absolute; inset:-6px; border-radius:999px;
      background:linear-gradient(130deg, var(--magenta), var(--turq), var(--magenta));
      background-size:200% 200%;
      filter:blur(10px);
      animation:ctaGradient 8s ease-in-out infinite;
      opacity:.55; z-index:-2;
    }
    @keyframes ctaGradient{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
    .register-text:hover{ transform:scale(1.06); box-shadow:0 0 24px rgba(0,255,255,.55), inset 0 0 12px rgba(0,255,255,.18); filter:saturate(1.07) }

    #centered-bottom-text{ position:fixed; z-index:2100 }
    #cta-buttons{ z-index:2000 }

    /* ===== Fila de botones ===== */
    #cta-buttons{
      position:fixed; bottom:50px; width:100%; z-index:2000; display:flex; justify-content:center; gap:var(--btn-gap); padding:0 16px;
    }
    .svg-button{
      width:var(--btn-size); height:var(--btn-size); border-radius:50%; background:rgba(255,255,255,.1);
      display:flex; justify-content:center; align-items:center; box-shadow:0 4px 15px rgba(0,255,255,.5); animation:pulse 2s infinite;
      transition:transform .3s, box-shadow .3s; cursor:pointer;
    }
    .svg-button:hover{ transform:scale(1.1); box-shadow:0 0 20px rgba(0,255,255,.8),0 0 30px rgba(0,255,255,.6) }
    .svg-button svg{ width:60%; height:60%; fill:#fff; filter:drop-shadow(0 0 5px rgba(0,255,255,.7)) }
    @keyframes pulse{0%{box-shadow:0 0 0 0 rgba(0,255,255,.7)}70%{box-shadow:0 0 0 15px rgba(0,255,255,0)}100%{box-shadow:0 0 0 0 rgba(0,255,255,0)}}

    /* ===== A-Frame ===== */
    a-scene#scene-container{ width:100%; height:100%; position:fixed; top:0; left:0; z-index:1 }

    /* ===== Overlay / formulario ===== */
    html, body { touch-action: pan-x pan-y; }
    button, a, input, textarea, select, label { touch-action: manipulation; }

    #full-page-container{
      position:fixed; inset:0; background:transparent; display:none; justify-content:center; align-items:center; z-index:3000;
    }
    #full-page-container.active{ display:flex }
    .form-container{
      background:#fff; padding:20px; border-radius:12px; box-shadow:0 10px 25px rgba(0,0,0,.35);
      width:420px; max-width:92vw; max-height:88vh; display:flex; flex-direction:column; overflow:auto; -webkit-overflow-scrolling:touch;
    }
    h2{ text-align:center; margin:0 0 16px; color:var(--azul) }
    label{ font-weight:bold; display:block; margin-top:10px }
    input{ width:100%; padding:10px; margin-top:5px; border:1px solid #ccc; border-radius:6px }
    input::placeholder{ color:rgba(0,0,0,.3) }
    .item{ display:flex; justify-content:space-between; align-items:center; margin-top:12px }
    .controls{ display:flex; align-items:center; gap:10px }
    .btn{ padding:10px 14px; font-size:16px; border:none; border-radius:6px; cursor:pointer; background:var(--azul); color:#fff }
    .btn:disabled{ background:#ccc; cursor:not-allowed }
    .btn-gray-small {
      background: transparent; color: #888; border: none; font-size: 13px; text-decoration: underline; margin-top: 8px; cursor: pointer; padding: 5px;
    }
    .btn-gray-small:hover { color: #555; }
    
    .qty{ min-width:30px; text-align:center; font-weight:bold }
    .total-box{ margin-top:16px; padding-top:12px; border-top:1px solid #ddd }
    .resumen-title{ color:var(--azul); font-weight:800; font-size:1.05rem; margin:12px 0 6px; text-transform:uppercase; letter-spacing:.5px }
    .total-row{ display:flex; justify-content:space-between; margin:6px 0; font-size:16px }
    
    /* ESTILOS MODIFICADOS PARA PRECIOS */
    .tachado{ text-decoration:line-through; color:#777; }
    /* Nueva clase para descuentos: Rojo y sin tachar */
    .texto-rojo{ color:#f00; font-weight:bold; }
    
    .total{ font-size:20px; font-weight:bold; color:var(--azul) }
    .cliente-frecuente-container{ margin:6px 0 8px; }
    .form-actions{ margin-top:16px }
    /* Solo 1 bot√≥n principal ahora */
    .actions-main{ width:100%; margin-bottom: 10px; }
    .actions-main .btn{ width:100%; font-size: 1.1em; padding: 12px; }
    
    .actions{ display:flex; flex-direction: column; align-items: center; justify-content:center; gap:5px; margin-top:10px }
    .initial-hidden{ display:none; }

    /* ===== Modo formulario: ver s√≥lo bandas ===== */
    body.form-mode #hsu-content{ opacity:0; pointer-events:none; }
    body.form-mode #top-scrolling-banner,
    body.form-mode #scrolling-banner{ opacity:1; }
    body.form-mode #top-scrolling-banner-content,
    body.form-mode #scrolling-banner-content{ opacity:.8; filter:contrast(.9) brightness(.8); }

    /* ===== Desktop tweaks ===== */
    @media (min-width:1024px){
      #countdown-container{
        left:50%;
        transform:translateX(-50%);
        width:min(720px, 90%);
        margin:0 auto;
        border-radius:12px;
        backdrop-filter: blur(2px);
        padding:14px 18px;
      }
      #dj-scroller-container{ bottom:240px; }
    }

    /* ===== Responsive ===== */
    @media (max-width:768px){
      :root{ --btn-size:60px; --btn-gap:14px; --title-size:2.6em; --countdown-top:100px; --banner-h:34px }
      .countdown-timer{ font-size:1.15em }
      #dj-scroller-container{ bottom:200px; height:120px }
      .dj-name-item{ font-size:1.6em; height:40px }
      .dj-name-item.center{ font-size:2.4em }
      #centered-bottom-text{ bottom:155px }
      #cta-buttons{ bottom:88px }
      .btn{ padding:10px 12px; font-size:15px }
    }
    @media (max-width:480px){
      :root{ --btn-size:50px; --btn-gap:12px; --title-size:2em; --countdown-top:88px; --banner-h:30px }
      #superklub-title{ top:calc(var(--banner-h) + 6px) }
      #centered-bottom-text{ bottom:150px }
      #cta-buttons{ bottom:86px }
      .countdown-timer{ font-size:1em }
      .form-container{ width:96vw; max-height:86vh; padding:16px }
      .btn{ padding:9px 11px; font-size:14px }
    }
  </style>
</head>

<body>
  <div id="top-scrolling-banner"><div id="top-scrolling-banner-content"></div></div>

  <div id="hsu-content">
    <div id="superklub-title">SUPERKLUB</div>
    <div id="countdown-container">
      <a href="https://logwork.com/countdown-timer" class="countdown-timer" data-style="columns" data-timezone="America/Santiago" data-language="es" data-date="2026-01-10 00:00" data-digitscolor="#ffffff" data-unitscolor="#ffffff">10/01/2026</a>
    </div>

    <div id="dj-scroller-container">
      <div class="dj-name-item" id="dj-top"></div>
      <div class="dj-name-item" id="dj-middle"></div>
      <div class="dj-name-item" id="dj-bottom"></div>
    </div>

    <div id="centered-bottom-text">
      <a href="#" class="register-text" id="register-link">> REG√çSTRATE <</a>
    </div>

    <div id="cta-buttons">
      <a href="https://www.ticketmaster.cl/event/superklub-centro-parque-2026-vicente-medel" target="_blank" class="svg-button" aria-label="Ticketmaster">
        <svg viewBox="0 0 24 24"><circle cx="7" cy="22" r="2"/><circle cx="17" cy="22" r="2"/><path d="M23.685,1.336a1,1,0,0,0-1.414,0L17.112,6.5,15.561,4.881a1,1,0,0,0-1.442,1.386l1.614,1.679a1.872,1.872,0,0,0,1.345.6h.033a1.873,1.873,0,0,0,1.335-.553L23.685,2.75A1,1,0,0,0,23.685,1.336Z"/><path d="M21.9,9.016a1,1,0,0,0-1.162.807l-.128.709A3,3,0,0,1,17.657,13H5.418l-.94-8H11a1,1,0,0,0,0-2H4.242L4.2,2.648A3,3,0,0,0,1.222,0H1A1,1,0,0,0,1,2h.222a1,1,0,0,1,.993.883l1.376,11.7A5,5,0,0,0,8.557,19H19a1,1,0,0,0,0-2H8.557a3,3,0,0,1-2.829-2H17.657a5,5,0,0,0,4.921-4.113l.128-.71A1,1,0,0,0,21.9,9.016Z"/></svg>
      </a>
      <a href="https://open.spotify.com/playlist/2LVvgP7VJN5xAkmPdl5J4q?si=795e6ffb2d914cb8" target="_blank" class="svg-button" aria-label="Spotify">
        <svg viewBox="0 0 24 24"><path d="M12,0C5.373,0,0,5.373,0,12c0,6.628,5.373,12,12,12c6.628,0,12-5.372,12-12C24,5.373,18.628,0,12,0z M17.503,17.308c-0.216,0.354-0.676,0.464-1.028,0.249c-2.818-1.722-6.365-2.111-10.542-1.157c-0.403,0.092-0.804-0.16-0.896-0.562c-0.092-0.402,0.159-0.804,0.563-0.895c4.571-1.045,8.492-0.595,11.655,1.338C17.608,16.495,17.719,16.956,17.503,17.308zM18.972,14.041c-0.271,0.44-0.847,0.578-1.287,0.308c-3.225-1.982-8.142-2.557-11.958-1.398C5.233,13.1,4.71,12.821,4.56,12.327c-0.149-0.495,0.13-1.016,0.624-1.167c4.358-1.323,9.776-0.682,13.48,1.594C19.104,13.025,19.242,13.601,18.972,14.041zM19.098,10.638C15.23,8.341,8.85,8.13,5.157,9.251c-0.593,0.18-1.22-0.155-1.4-0.748c-0.18-0.593,0.155-1.22,0.748-1.4c4.239-1.287,11.285-1.038,15.738,1.605c0.533,0.317,0.708,1.005,0.392,1.538C20.32,10.779,19.63,10.955,19.098,10.638z"/></svg>
      </a>
      <a href="https://www.instagram.com/vixentres._/" target="_blank" class="svg-button" aria-label="Instagram">
        <svg viewBox="0 0 24 24"><path style="fill-rule:evenodd;clip-rule:evenodd;" d="M12,2.162c3.204,0,3.584,0.012,4.849,0.07c1.308,0.06,2.655,0.358,3.608,1.311c0.962,0.962,1.251,2.296,1.311,3.608c0.058,1.265,0.07,1.645,0.07,4.849c0,3.204-0.012,3.584-0.07,4.849c-0.059,1.301-0.364,2.661-1.311,3.608c-0.962,0.962-2.295,1.251-3.608,1.311c-1.265,0.058-1.645,0.07-4.849,0.07s-3.584-0.012-4.849-0.07c-1.291-0.059-2.669-0.371-3.608-1.311c-0.957-0.957-1.251-2.304-1.311-3.608c-0.058-1.265-0.07-1.645-0.07-4.849c0-3.204,0.012-3.584,0.07-4.849c0.059-1.296,0.367-2.664,1.311-3.608c0.96-0.96,2.299-1.251,3.608-1.311C8.416,2.174,8.796,2.162,12,2.162 M12,0C8.741,0,8.332,0.014,7.052,0.072C5.197,0.157,3.355,0.673,2.014,2.014C0.668,3.36,0.157,5.198,0.072,7.052C0.014,8.332,0,8.741,0,12c0,3.259,0,3.668,0.072,4.948c0.085,1.853,0.603,3.7,1.942,5.038c1.345,1.345,3.186,1.857,5.038,1.942C8.332,23.986,8.741,24,12,24c3.259,0,3.668-0.014,4.948-0.072c1.854-0.085,3.698-0.602,5.038-1.942c1.345-1.345,1.857-3.184,1.942-5.038C23.986,15.668,24,15.259,24,12c0-3.259-0.014-3.668-0.072-4.948c-0.085-1.855-0.602-3.698-1.942-5.038c-1.343-1.343-3.189-1.858-5.038-1.942C15.668,0.014,15.259,0,12,0z"/><path d="M12,5.838c-3.403,0-6.162,2.759-6.162,6.162c0,3.403,2.759,6.162,6.162,6.162s6.162-2.759,6.162-6.162C18.162,8.597,15.403,5.838,12,5.838z M12,16c-2.209,0-4-1.791-4-4s1.791-4,4-4s4,1.791,4,4S14.209,16,12,16z"/><circle cx="18.406" cy="5.594" r="1.44"/></svg>
      </a>
      <a href="https://wa.me/56987421967?text=Hola%20!!!%20tienes%20entradas%20para%20HSU%20%3F%3F" target="_blank" class="svg-button" aria-label="WhatsApp">
        <svg viewBox="0 0 24 24"><path d="M20.463,3.488C18.217,1.24,15.231,0.001,12.05,0C5.495,0,0.16,5.334,0.157,11.892c-0.001,2.096,0.547,4.142,1.588,5.946L0.057,24l6.304-1.654c1.737,0.948,3.693,1.447,5.683,1.448h0.005c6.554,0,11.89-5.335,11.893-11.893C23.944,8.724,22.708,5.735,20.463,3.488zM12.05,21.785h-0.004c-1.774,0-3.513-0.477-5.031-1.378l-0.361-0.214l-3.741,0.981l0.999-3.648l-0.235-0.374c-0.99-1.574-1.512-3.393-1.511-5.26c0.002-5.45,4.437-9.884,9.889-9.884c2.64,0,5.122,1.03,6.988,2.898c1.866,1.869,2.893,4.352,2.892,6.993C21.932,17.351,17.498,21.785,12.05,21.785zM17.472,14.382c-0.297-0.149-1.758-0.868-2.031-0.967c-0.272-0.099-0.47-0.149-0.669,0.148s-0.767,0.967-0.941,1.166c-0.173,0.198-0.347,0.223-0.644,0.074c-0.297-0.149-1.255-0.462-2.39-1.475c-0.883-0.788-1.48-1.761-1.653-2.059s-0.018-0.458,0.13-0.606c0.134-0.133,0.297-0.347,0.446-0.521C9.87,9.97,9.919,9.846,10.019,9.647c0.099-0.198,0.05-0.372-0.025-0.521C9.919,8.978,9.325,7.515,9.078,6.92c-0.241-0.58-0.486-0.501-0.669-0.51C8.236,6.401,8.038,6.4,7.839,6.4c-0.198,0-0.52,0.074-0.792,0.372c-0.272,0.298-1.04,1.017-1.04,2.479c0,1.463,1.065,2.876,1.213,3.074c0.148,0.198,2.095,3.2,5.076,4.487c0.709,0.306,1.263,0.489,1.694,0.626c0.712,0.226,1.36,0.194,1.872,0.118c0.571-0.085,1.758-0.719,2.006-1.413c0.248-0.694,0.248-1.29,0.173-1.413C17.967,14.605,17.769,14.531,17.472,14.382z"/></svg>
      </a>
    </div>

    <!-- A-SCENE: c√°mara fija, sin giroscopio ni WASD -->
    <a-scene embedded vr-mode-ui="enabled:false" device-orientation-permission-ui="enabled:false" id="scene-container">
      <a-assets>
        <a-asset-item id="logo3d" src="https://vixentres.github.io/hsu.github.io/Crown.glb"></a-asset-item>
        <img id="okPng" src="https://vixentres.github.io/hsu.github.io/ok.png">
      </a-assets>

      <script>
        AFRAME.registerComponent('clickable-link',{schema:{href:{type:'string'}},init:function(){
          var data=this.data, el=this.el;
          AFRAME.registerComponent('cursor-listener',{init:function(){
            this.el.addEventListener('mouseenter',()=>document.body.style.cursor='pointer');
            this.el.addEventListener('mouseleave',()=>document.body.style.cursor='auto');
          }});
          el.setAttribute('cursor-listener','');
          el.addEventListener('click',function(){ if(data.href) window.open(data.href,'_blank'); });
        }});
      </script>

      <!-- Logo 3D con vaiv√©n -->
      <a-entity id="front-logo" gltf-model="#logo3d" position="0 2.2 -1.5" rotation="0 0 0" scale="-0.5 0.5 0.5"
        animation="property: rotation; from: 0 -10 0; to: 0 10 0; dir: alternate; dur: 3000; easing: easeInOutQuad; loop: true"></a-entity>

      <a-image src="#okPng" position="0 0.05 0" rotation="-90 0 0" scale="0.5 0.5 0.5" look-at="[camera]"></a-image>

      <!-- C√°mara FIJA -->
      <a-entity position="0 0.5 0">
        <a-camera wasd-controls="enabled:false" look-controls="enabled:false" cursor="rayOrigin: mouse"></a-camera>
      </a-entity>
    </a-scene>
  </div>

  <div id="full-page-container">
    <!-- Formulario -->
    <div class="form-container" id="form-section">
      <div class="form-buttons-row"></div>
      <h2>REGISTRO DE<br>ENTRADAS</h2>

      <form id="reservaForm">
        <div class="cliente-frecuente-container">
          <span class="cliente-frecuente-message" id="cliente-frecuente-info" style="display:none;"></span>
        </div>

        <label for="correo">Correo electr√≥nico*</label>
        <div class="correo-container">
          <input type="email" id="correo" name="correo" placeholder="direccion-email@gmail.com" required>
          <div class="loading-spinner" id="loading-spinner" style="display:none;"></div>
        </div>
        <div class="loading-text" id="loading-text" style="display:none;">Buscando perfil...</div>

        <label for="nombre">Nombre completo</label>
        <input type="text" id="nombre" name="nombre" placeholder="Harder Style United" required>

        <label for="telefono">N√∫mero de contacto</label>
        <input type="tel" id="telefono" name="telefono" placeholder="+569-XXXX-XXXX" maxlength="12">

        <label for="instagram">Instagram</label>
        <input type="text" id="instagram" name="instagram" placeholder="eventshsu.cl">

        <div class="item">
          <div><h5 id="tipo-entrada-general"><b class="bold-label">Entrada General (1x)</b> <span id="precio-general-con-cargo">$40.000</span></h5></div>
          <div class="controls">
            <button type="button" class="btn" id="minus-general" >-</button>
            <div class="qty" id="qty-general">1</div>
            <button type="button" class="btn" id="plus-general" >+</button>
          </div>
        </div>

        <div class="item">
          <div><h5 id="tipo-entrada-crewpack"><b class="bold-label">Entrada General (5x)</b> <span id="precio-crewpack-con-cargo">$200.000</span></h5></div>
          <div class="controls">
            <button type="button" class="btn" id="minus-crewpack" >-</button>
            <div class="qty" id="qty-crewpack">0</div>
            <button type="button" class="btn" id="plus-crewpack" >+</button>
          </div>
        </div>

        <h3 class="resumen-title">Resumen de compra</h3>
        <div class="total-box">
          <div class="total-row"><span id="label-cantidad-entradas">Cantidad de entradas</span><span id="cantidad-entradas">1</span></div>
          <!-- PRECIO TOTAL AHORA TACHADO -->
          <div class="total-row"><span id="label-precio-total">Precio total</span><span class="tachado" id="precio-total">$46.000</span></div>
          <!-- Descuentos en ROJO y NEGATIVO -->
          <div class="total-row"><span>Descuento sin cargo 15%</span><span class="texto-rojo" id="descuento-general">-$6.000</span></div>
          <div class="total-row initial-hidden" id="crewpack-row"><span>Descuento crewpack</span><span class="texto-rojo" id="descuento-crewpack">-$0</span></div>
          <div class="total-row initial-hidden" id="blackfriday-row"><span>Descuento Black Friday</span><span class="texto-rojo" id="descuento-blackfriday">-$0</span></div>
          
          <div class="total-row total"><span>Total a pagar</span><span id="total-a-pagar">$40.000</span></div>
        </div>

        <div class="form-actions">
          <div class="actions-main">
            <!-- Bot√≥n unificado -->
            <button type="submit" class="btn" id="register-btn" disabled>Registrarse</button>
          </div>

          <div class="actions">
            <button type="button" class="btn" onclick="showHsuPage()" style="width:100%; max-width:140px;">Volver</button>
            <button type="button" class="btn-gray-small" id="unsubscribe-btn">Desuscribirse</button>
          </div>
        </div>
      </form>
    </div>

    <!-- Post-registro (Unificado) -->
    <div class="form-container" id="confirm-section" style="display:none;">
      <h2 class="title">¬°Gracias por tu confianza y preferencia!</h2>
      <p style="text-align:center; margin-bottom:12px;" id="confirmation-message"></p> 

      <h3 class="resumen-title">Resumen de compra</h3>
      <div class="total-box">
        <div class="total-row"><span id="label-cantidad-entradas-confirm">Cantidad de entradas</span><span id="cantidad-entradas-confirm">0</span></div>
        <div class="total-row"><span id="label-precio-total-confirm">Precio total</span><span class="tachado" id="precio-total-confirm">$0</span></div>
        <div class="total-row"><span>Descuento sin cargo</span><span class="texto-rojo" id="descuento-general-confirm">-$0</span></div>
        <div class="total-row initial-hidden" id="descuento-crewpack-confirm-row"><span>Descuento crewpack</span><span class="texto-rojo" id="descuento-crewpack-confirm">-$0</span></div>
        <div class="total-row initial-hidden" id="descuento-blackfriday-confirm-row"><span>Descuento Black Friday</span><span class="texto-rojo" id="descuento-blackfriday-confirm">-$0</span></div>
        
        <div class="total-row total"><span>Total a pagar</span><span id="total-a-pagar-confirm">$0</span></div>
        
        <p style="text-align:center; margin-top:12px; font-weight:bold; color:var(--azul);">Datos bancarios copiados en el portapapeles, puedes usar tu app de banco</p>
        
        <p style="text-align:center; margin-top:5px; color:#024ddf; font-weight:bold;" id="entradas-acumuladas-compra"></p>
      </div>

      <div class="actions">
        <button type="button" class="btn" onclick="showHsuPage()">Volver al inicio</button>
      </div>
    </div>

    <!-- Desuscripci√≥n -->
    <div class="form-container" id="unsubscribe-section" style="display:none;">
      <h2 class="title">Desuscribirse</h2>
      <p style="text-align:center; margin-bottom:20px;">¬øDeseas no recibir m√°s informaci√≥n o dejar de participar en posibles sorteos por parte del vendedor?</p>
      <form id="unsubscribeForm">
        <label for="unsubscribe-correo">Correo electr√≥nico*</label>
        <input type="email" id="unsubscribe-correo" name="unsubscribe-correo" required>
        <div class="actions"><button type="submit" class="btn">Aceptar</button></div>
      </form>
      <button class="btn volver" style="margin-top:20px;" onclick="showFormPage()">Volver</button>
    </div>
  </div>

  <div id="scrolling-banner"><div id="scrolling-banner-content"></div></div>

  <script>
    /* =======================
       CONFIG (editables)
       ======================= */
    const EVENTO = {
      precioUnitarioSinCargo: 40000,   // Precio Base
      descuentoCrewPackManual: 3000,   // Descuento POR PACK
      descuentoBlackFriday: 4000,      // Descuento POR ENTRADA (Black Friday)
      idEvento: 4,

      // C√°lculos derivados
      get cargoPorServicio(){ return Math.round(this.precioUnitarioSinCargo * 0.15); },
      get precioEntradaGeneral(){ return this.precioUnitarioSinCargo + this.cargoPorServicio; },
      get precioCrewPack(){ return this.precioEntradaGeneral * 5; },
      get descuentoGeneral(){ return this.cargoPorServicio; },
      get descuentoCrewPack(){ return this.descuentoCrewPackManual; },

      fecha: '2026-01-10 00:00',
      djNames: ["DIMITRI-K","MC.ROBS","RADICAL REDEMPTION", "JAY REEVE","KARINA ROSEE"],

      hojaUrl: "https://script.google.com/macros/s/AKfycbxMt88X2mfxXRionLlsGlpZWWRXdLuIc0W3v7yYlkrw1Swp6QvrfwMqYV3xPdEbw1P1/exec",
      hojaClientesUrl: "https://script.google.com/macros/s/AKfycbxklOoDJgh0azEcUxxAr8mI6TkA3feUSNxTGIhDWtIMWHw3hrEoBDTOMdsWIBhgs2q3/exec",

      nombreEvento: "HSU / SUPERKLUB",
      descripcionEvento: "‚õì Vicente üåπ (@vixentres._) 3,928 seguidores, 1.349 seguidos, 51 publicaciones - Ver fotos y videos de Instagram"
    };

    const EMOJIS_FIESTA = ["üéâ","ü•≥","üéä","üèÜ","üåü","üí•","üéà","üí´","üî•","ü™©"];

    /* =======================
       Estado y refs
       ======================= */
    let cantidadGeneral=1, cantidadCrewPack=0, entradasAcumuladas=0;

    const qtyGeneralEl=document.getElementById("qty-general");
    const qtyCrewPackEl=document.getElementById("qty-crewpack");
    const cantidadEntradasEl=document.getElementById("cantidad-entradas");
    const precioTotalEl=document.getElementById("precio-total");
    const descuentoGeneralEl=document.getElementById("descuento-general");
    const descuentoCrewEl=document.getElementById("descuento-crewpack");
    const crewpackRowEl=document.getElementById("crewpack-row");
    
    // Refs Black Friday
    const blackFridayRowEl=document.getElementById("blackfriday-row");
    const descuentoBlackFridayEl=document.getElementById("descuento-blackfriday");

    const totalPagarEl=document.getElementById("total-a-pagar");
    
    // Solo un bot√≥n ahora
    const registerBtn=document.getElementById("register-btn");

    const correoInput=document.getElementById("correo");
    const nombreInput=document.getElementById("nombre");
    const telefonoInput=document.getElementById("telefono");
    const instagramInput=document.getElementById("instagram");
    const clienteFrecuenteInfo=document.getElementById("cliente-frecuente-info");
    const loadingSpinner=document.getElementById('loading-spinner');
    const loadingText=document.getElementById('loading-text');

    /* =======================
       Utils
       ======================= */
    // Helper para formatear valores negativos o positivos con $
    function formatPrice(n){ 
      // toLocaleString maneja el negativo autom√°ticamente poni√©ndolo antes o despu√©s seg√∫n locale, 
      // pero para asegurar "visual negativo", pasaremos el n√∫mero negativo tal cual.
      return n.toLocaleString('es-CL',{style:'currency',currency:'CLP',maximumFractionDigits:0}); 
    }
    function lanzarConfeti(){ confetti({ particleCount: 150, spread: 70, origin: { y: 0.35 }, zIndex: 5000 }); }

    /* =======================
       Normalizaciones / validaciones
       ======================= */
    function isValidEmail(v){ return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(v).toLowerCase()); }

    correoInput.addEventListener('input', (e)=>{
      const cur = e.target.selectionStart;
      e.target.value = e.target.value.toLowerCase();
      e.target.setSelectionRange(cur, cur);
      scheduleClienteFrecuenteLookup();
      actualizarTotales();
    });
    correoInput.addEventListener('blur', scheduleClienteFrecuenteLookup);

    instagramInput.addEventListener('input',(e)=>{
      const cur = e.target.selectionStart;
      e.target.value = e.target.value.replace('@','').toLowerCase();
      e.target.setSelectionRange(cur, cur);
    });

    nombreInput.addEventListener("input",(e)=>{
      let v=e.target.value;
      e.target.value = v.toLowerCase().split(' ').map(w=>w.charAt(0).toUpperCase()+w.slice(1)).join(' ');
      actualizarTotales();
    });

    telefonoInput.addEventListener("blur",(e)=>{
      let valor=e.target.value.replace(/[^0-9+]/g,'');
      if(valor.startsWith('+')){ e.target.value=valor; e.target.dataset.clean=valor; return; }
      let prefijo='';
      if(valor.length===11 && valor.startsWith('5')) prefijo='+';
      else if(valor.length===8) prefijo='+569';
      else if(valor.length===9) prefijo='+56';
      else if(valor.length===10) prefijo='+5';
      e.target.value=prefijo?prefijo+valor:valor;
      e.target.dataset.clean=e.target.value;
    });

    /* =======================
       Cliente frecuente
       ======================= */
    let emailDebounce = null;
    function scheduleClienteFrecuenteLookup(){
      const v = correoInput.value.trim().toLowerCase();
      if(emailDebounce) clearTimeout(emailDebounce);
      emailDebounce = setTimeout(()=>{ if(isValidEmail(v)){ startLoading(); buscarClienteFrecuente(v); } }, 1200);
    }
    function startLoading(){ loadingSpinner.style.display='block'; loadingText.style.display='block'; }
    function stopLoading(){ loadingSpinner.style.display='none'; loadingText.style.display='none'; }

    function buscarClienteFrecuente(correo){
      if(!correo){ stopLoading(); return; }
      const url=`${EVENTO.hojaClientesUrl}?correo=${encodeURIComponent(correo)}`;
      fetch(url).then(r=>r.json()).then(data=>{
        stopLoading();
        if(data && (data.status==='success' || data.nombre || data.instagram || data.numero)){
          if(data.nombre && String(data.nombre).trim()){ nombreInput.value = String(data.nombre).trim(); }
          if(data.instagram && String(data.instagram).trim()){ instagramInput.value = String(data.instagram).trim().replace('@',''); }
          if(data.numero && String(data.numero).trim()){
            const numeroLimpio = String(data.numero).trim();
            telefonoInput.value = numeroLimpio;
            telefonoInput.dataset.clean = numeroLimpio;
          }
          const en = Number(data.entradas)||0;
          entradasAcumuladas = en;
          if(en>0){
            const emoji = EMOJIS_FIESTA[Math.floor(Math.random()*EMOJIS_FIESTA.length)];
            clienteFrecuenteInfo.textContent=`¬°Cliente frecuente! Llevas ${en} entradas compradas ${emoji}`;
            clienteFrecuenteInfo.style.display='block';
          }else{
            clienteFrecuenteInfo.textContent='';
            clienteFrecuenteInfo.style.display='none';
          }
        }else{
          entradasAcumuladas = 0;
          clienteFrecuenteInfo.textContent='';
          clienteFrecuenteInfo.style.display='none';
        }
      }).catch(err=>{
        stopLoading();
        entradasAcumuladas = 0;
        clienteFrecuenteInfo.textContent='';
        clienteFrecuenteInfo.style.display='none';
      }).finally(()=>{ actualizarTotales(); });
    }

    /* =======================
       Totales (formulario) - MODIFICADO
       ======================= */
    function actualizarTotales(){
      const totalEntradas=cantidadGeneral+(cantidadCrewPack*5);
      // Precio lista (bruto)
      const precioBruto=(cantidadGeneral*EVENTO.precioEntradaGeneral)+(cantidadCrewPack*EVENTO.precioCrewPack);
      
      // Descuento cargo por servicio (siempre aplica)
      const descGeneral=(cantidadGeneral+(cantidadCrewPack*5))*EVENTO.descuentoGeneral;
      
      // Descuento Crewpack: 3000 por cada pack (cantidadCrewPack * 3000)
      // Ajuste: si cantidadCrewPack es 2 (10 entradas), desc es 6000.
      const descCrew = cantidadCrewPack * EVENTO.descuentoCrewPackManual;

      // Descuento Black Friday: por cada entrada total
      const descBlackFriday = (totalEntradas * EVENTO.descuentoBlackFriday);

      // Total final a pagar
      const total = precioBruto - (descGeneral + descCrew + descBlackFriday);

      qtyGeneralEl.textContent=cantidadGeneral;
      qtyCrewPackEl.textContent=cantidadCrewPack;
      cantidadEntradasEl.textContent=String(totalEntradas);
      
      // Mostrar precio bruto (ser√° tachado por CSS)
      precioTotalEl.textContent=formatPrice(precioBruto);
      
      // Mostrar descuentos en negativo
      descuentoGeneralEl.textContent=descGeneral>0?formatPrice(-descGeneral):'$0';
      
      // Crewpack Row
      if(cantidadCrewPack>0){
        crewpackRowEl.classList.remove('initial-hidden');
        descuentoCrewEl.textContent=formatPrice(-descCrew);
      }else{
        crewpackRowEl.classList.add('initial-hidden');
        descuentoCrewEl.textContent='-$0';
      }

      // Black Friday Row
      if(descBlackFriday > 0){
        blackFridayRowEl.classList.remove('initial-hidden');
        descuentoBlackFridayEl.textContent = formatPrice(-descBlackFriday);
      } else {
        blackFridayRowEl.classList.add('initial-hidden');
        descuentoBlackFridayEl.textContent = '-$0';
      }

      totalPagarEl.textContent=formatPrice(total);

      // Habilitar bot√≥n √∫nico
      const correoOk = isValidEmail(correoInput.value);
      const nombreOk = (nombreInput.value || '').trim().length > 4;
      const enable = (totalEntradas > 0) && correoOk && nombreOk;
      
      registerBtn.disabled = !enable;
    }

    /* =======================
       Confeti
       ======================= */
    function setCrewPack(newVal){
      const prev = cantidadCrewPack;
      if(newVal<0) newVal=0;
      if(newVal!==prev){
        cantidadCrewPack = newVal;
        lanzarConfeti();
      }
    }

    /* =======================
       L√≥gica Contadores
       ======================= */
    function incGeneral(){
      const prevGeneral = cantidadGeneral;
      const prevCrew = cantidadCrewPack;
      cantidadGeneral = (cantidadGeneral + 1) % 5;
      if(prevGeneral === 4 && cantidadGeneral === 0){
        setCrewPack(prevCrew + 1);
      }
      actualizarTotales();
    }
    function decGeneral(){
      const prevCrew = cantidadCrewPack;
      if(cantidadGeneral > 0){
        cantidadGeneral -= 1;
      }else if(prevCrew > 0){
        setCrewPack(prevCrew - 1);
        cantidadGeneral = 4;
      }
      actualizarTotales();
    }
    function incCrew(){ setCrewPack(cantidadCrewPack + 1); cantidadGeneral=0; actualizarTotales(); }
    function decCrew(){ setCrewPack(cantidadCrewPack - 1); cantidadGeneral=0; actualizarTotales(); }

    /* =======================
       Env√≠o a hoja
       ======================= */
    function enviarDatos(actionType){
      const correo=correoInput.value.trim();
      const nombre=nombreInput.value.trim();
      const instagram=instagramInput.value.trim();
      const telefono=telefonoInput.dataset.clean || telefonoInput.value.trim();

      const totalEntradas = cantidadGeneral + (cantidadCrewPack*5);
      const totalPorEntrada = EVENTO.precioUnitarioSinCargo; 

      if(actionType === 'copy-data'){ return; }

      const filas = [];
      for(let i=0; i<totalEntradas; i++){
        filas.push({
          action: 'register',
          nombre, correo, instagram, telefono,
          cantidad: 1,          
          total: totalPorEntrada,
          evento: EVENTO.idEvento
        });
      }

      (async ()=>{
        for(const fila of filas){
          try{ await fetch(EVENTO.hojaUrl,{ method:'POST', body:JSON.stringify(fila), mode:'no-cors' }); }
          catch(err){ console.error('Error al enviar una fila:', err); }
        }
        console.log(`Enviadas ${filas.length} filas a la hoja.`);
      })();
    }

    /* =======================
       Navegaci√≥n de pantallas
       ======================= */
    function showConfirmSection(){
      document.getElementById("form-section").style.display="none";
      document.getElementById("confirm-section").style.display="block";

      const totalEntradas=cantidadGeneral+(cantidadCrewPack*5);
      const precioTotal=(cantidadGeneral*EVENTO.precioEntradaGeneral)+(cantidadCrewPack*EVENTO.precioCrewPack);
      
      const descuentoSinCargo=(cantidadGeneral+(cantidadCrewPack*5))*EVENTO.descuentoGeneral;
      
      // Calculo correcto para el resumen final (cantidad packs * valor descuento pack)
      const descuentoCrewPackVal = cantidadCrewPack * EVENTO.descuentoCrewPackManual;
      
      const descuentoBlackFriday = (totalEntradas * EVENTO.descuentoBlackFriday);
      
      const totalResumen=precioTotal-(descuentoSinCargo+descuentoCrewPackVal+descuentoBlackFriday);

      document.getElementById("cantidad-entradas-confirm").textContent=totalEntradas;
      document.getElementById("precio-total-confirm").textContent=formatPrice(precioTotal);
      document.getElementById("descuento-general-confirm").textContent=formatPrice(-descuentoSinCargo);
      
      if (descuentoCrewPackVal > 0){
        document.getElementById("descuento-crewpack-confirm-row").classList.remove('initial-hidden');
        document.getElementById("descuento-crewpack-confirm").textContent=formatPrice(-descuentoCrewPackVal);
      }else{
        document.getElementById("descuento-crewpack-confirm-row").classList.add('initial-hidden');
        document.getElementById("descuento-crewpack-confirm").textContent='-$0';
      }

      // Black Friday Confirm
      const bfRowConfirm = document.getElementById("descuento-blackfriday-confirm-row");
      const bfValConfirm = document.getElementById("descuento-blackfriday-confirm");
      if(descuentoBlackFriday > 0){
        bfRowConfirm.classList.remove('initial-hidden');
        bfValConfirm.textContent = formatPrice(-descuentoBlackFriday);
      } else {
        bfRowConfirm.classList.add('initial-hidden');
        bfValConfirm.textContent = '-$0';
      }

      document.getElementById("total-a-pagar-confirm").textContent=formatPrice(totalResumen);
      document.getElementById("confirmation-message").textContent = "";
      
      copiarDatos();
    }

    function showNewPage(){
      document.getElementById('full-page-container').style.display='flex';
      document.body.style.overflow='auto';
      document.getElementById('form-section').style.display='block';
      document.getElementById('confirm-section').style.display='none';
      document.getElementById('unsubscribe-section').style.display='none';
      document.getElementById('hsu-content').style.display='block';
      document.body.classList.add('form-mode');
      document.getElementById('correo').focus();
    }
    function showFormPage(){
      document.getElementById('form-section').style.display='block';
      document.getElementById('unsubscribe-section').style.display='none';
      document.getElementById('unsubscribe-correo').value=document.getElementById('correo').value;
    }
    function showHsuPage(){
      document.getElementById('full-page-container').style.display='none';
      document.body.style.overflow='hidden';
      document.getElementById('hsu-content').style.display='block';
      document.body.classList.remove('form-mode');
      cantidadGeneral=1; cantidadCrewPack=0;
      actualizarTotales();
    }

    /* =======================
       Handlers
       ======================= */
    function handleRegister(e){
      e.preventDefault();
      const totalEntradas=cantidadGeneral+(cantidadCrewPack*5);
      if(totalEntradas===0){ alert("Selecciona al menos 1 entrada para continuar."); return; }
      const correo=correoInput.value.trim();
      if(!correo){ alert("Es necesario ingresar un correo para poder enviar la/s entrada/s"); return; }
      
      enviarDatos('registro'); 
      showConfirmSection();
    }

    /* =======================
       INIT
       ======================= */
    window.onload=function(){
      const precioGeneralConCargoEl=document.getElementById('precio-general-con-cargo');
      const precioCrewPackConCargoEl=document.getElementById('precio-crewpack-con-cargo');
      if (precioGeneralConCargoEl) precioGeneralConCargoEl.textContent = formatPrice(EVENTO.precioEntradaGeneral);
      if (precioCrewPackConCargoEl) precioCrewPackConCargoEl.textContent = formatPrice(EVENTO.precioCrewPack);

      const precioK = Math.round((EVENTO.precioUnitarioSinCargo - EVENTO.descuentoBlackFriday) / 1000); // 36K
      const precioKString = `${precioK}K`;
      const descMeta = document.querySelector('meta[name="description"]');
      if (descMeta) { descMeta.setAttribute('content', descMeta.getAttribute('content').replace('40K', precioKString)); }
      const ogTitleMeta = document.querySelector('meta[property="og:title"]');
      if (ogTitleMeta) { ogTitleMeta.setAttribute('content', ogTitleMeta.getAttribute('content').replace('40K', precioKString)); }
      const twitterTitleMeta = document.querySelector('meta[name="twitter:title"]');
      if (twitterTitleMeta) { twitterTitleMeta.setAttribute('content', twitterTitleMeta.getAttribute('content').replace('40K', precioKString)); }

      setTimeout(()=>{ 
        if(typeof CountdownTimer!=='undefined'){ 
          CountdownTimer.init({ selector:'.countdown-timer', style:'columns', timezone:'America/Santiago', language:'es', date:EVENTO.fecha, textcolor:'#ffffff', digitscolor:'#ffffff', unitscolor:'#ffffff' }); 
        } 
      },500);

      const djTop=document.getElementById('dj-top'), djMiddle=document.getElementById('dj-middle'), djBottom=document.getElementById('dj-bottom');
      let currentIndex=0;
      function updateDjSlots(){
        djMiddle.classList.remove('center');
        setTimeout(()=>{
          const nextTopText=djMiddle.textContent;
          const nextMiddleText=djBottom.textContent;
          currentIndex=(currentIndex+1)%EVENTO.djNames.length;
          const nextBottomText=EVENTO.djNames[(currentIndex+1)%EVENTO.djNames.length];
          djTop.textContent=nextTopText;
          djMiddle.textContent=nextMiddleText;
          djBottom.textContent=nextBottomText;
          setTimeout(()=>{ djMiddle.classList.add('center'); },30);
        },200);
        setTimeout(updateDjSlots, 2000);
      }
      djTop.textContent=EVENTO.djNames[(currentIndex-1+EVENTO.djNames.length)%EVENTO.djNames.length];
      djMiddle.textContent=EVENTO.djNames[currentIndex];
      djBottom.textContent=EVENTO.djNames[(currentIndex+1)%EVENTO.djNames.length];
      djMiddle.classList.add('center');
      setTimeout(updateDjSlots,2000);

      showNewPage();

      document.getElementById('plus-general').addEventListener('click', incGeneral);
      document.getElementById('minus-general').addEventListener('click', decGeneral);
      document.getElementById('plus-crewpack').addEventListener('click', incCrew);
      document.getElementById('minus-crewpack').addEventListener('click', decCrew);

      document.getElementById('register-link').addEventListener('click',(e)=>{
        e.preventDefault();
        showNewPage();
      });

      document.getElementById("reservaForm").addEventListener("submit", handleRegister);

      document.getElementById("unsubscribe-btn").addEventListener("click",()=>{
        document.getElementById("form-section").style.display="none";
        document.getElementById("unsubscribe-section").style.display="block";
        document.getElementById('unsubscribe-correo').value=correoInput.value;
      });

      document.getElementById("unsubscribeForm").addEventListener("submit",function(e){
        e.preventDefault();
        const correo=document.getElementById("unsubscribe-correo").value;
        if(!correo){ alert("Por favor, ingresa un correo electr√≥nico."); return; }
        showHsuPage();
        const formData={ action:'unsubscribe', correo, nombre:"XXX-DESUSCRITO-XXX", instagram:"XXX-DESUSCRITO-XXX", telefono:"XXX-DESUSCRITO-XXX", tipo:'C', cantidad:0, total:0, evento:EVENTO.idEvento };
        fetch(EVENTO.hojaUrl,{ method:'POST', body:JSON.stringify(formData), mode:'no-cors' })
          .then(()=>{ alert("Tu solicitud de desuscripci√≥n ha sido enviada."); })
          .catch(err=>{ console.error('Error al procesar la desuscripci√≥n:',err); alert("Hubo un error al procesar tu solicitud. Por favor, int√©ntalo de nuevo."); });
      });

      actualizarTotales();
    };
    
    function copiarDatos(){
      const datos="VICENTE SEBASTIAN MEDEL\n19385365-K\nBanco Estado\nCuentaRUT\n19385365";
      if (navigator.clipboard && window.isSecureContext) {
        navigator.clipboard.writeText(datos).catch(err => {
            console.error('Error al copiar:', err);
        });
      } else {
        const textArea = document.createElement("textarea");
        textArea.value = datos;
        textArea.style.position = "fixed";
        textArea.style.left = "-9999px";
        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();
        try { document.execCommand('copy'); } catch (err) { console.error('Fallback: Error al copiar', err); }
        document.body.removeChild(textArea);
      }
    }

    document.addEventListener('wheel', function (e) { if (e.ctrlKey) e.preventDefault(); }, { passive: false });
    document.addEventListener('keydown', function (e) {
      const combo = (e.ctrlKey || e.metaKey);
      const keys = ['+', '-', '0', '=', '_'];
      if (combo && keys.includes(e.key)) e.preventDefault();
    });
    ['gesturestart','gesturechange','gestureend'].forEach(evt => {
      document.addEventListener(evt, function (e) { e.preventDefault(); }, { passive: false });
    });
  </script>
</body>
</html>
